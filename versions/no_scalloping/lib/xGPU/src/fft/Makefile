CUDA_INSTALL_PATH ?= /usr/local/cuda
INCLUDES  := -I. -I$(CUDA_INSTALL_PATH)/include
LIB       := -L$(CUDA_INSTALL_PATH)/lib64 -lcufft -lcuda

CXX       := g++ -c
NVCC      := nvcc -c -Xopencc -OPT:unroll_size=200000 -arch=sm_20
LINK      := g++ -fPIC

all : FFT

FFT : main.o FFT8.o FFT64.o FFT512.o FFT16.o FFT256.o FFT1024.o FFT2048.o FFT4096.o FFT8192.o IFFT8.o IFFT64.o IFFT512.o IFFT16.o IFFT256.o IFFT1024.o IFFT2048.o IFFT4096.o IFFT8192.o
	$(LINK) $(LIB) -o FFT main.o FFT8.o FFT64.o FFT512.o FFT16.o FFT256.o FFT1024.o FFT2048.o FFT4096.o FFT8192.o IFFT8.o IFFT64.o IFFT512.o IFFT16.o IFFT256.o IFFT1024.o IFFT2048.o IFFT4096.o IFFT8192.o

main.o : main.cpp
	$(CXX) $(INCLUDES) main.cpp

IFFT8.o : IFFT8.cu
	$(NVCC) $(INCLUDES) IFFT8.cu

IFFT64.o : IFFT64.cu
	$(NVCC) $(INCLUDES) IFFT64.cu

IFFT512.o : IFFT512.cu
	$(NVCC) $(INCLUDES) IFFT512.cu

IFFT16.o : IFFT16.cu
	$(NVCC) $(INCLUDES) IFFT16.cu

IFFT256.o : IFFT256.cu
	$(NVCC) $(INCLUDES) -maxrregcount 40 IFFT256.cu

IFFT1024.o : IFFT1024.cu
	$(NVCC) $(INCLUDES) IFFT1024.cu

IFFT2048.o : IFFT2048.cu
	$(NVCC) $(INCLUDES) IFFT2048.cu

IFFT4096.o : IFFT4096.cu
	$(NVCC) $(INCLUDES) IFFT4096.cu

IFFT8192.o : IFFT8192.cu
	$(NVCC) $(INCLUDES) IFFT8192.cu

FFT8.o : FFT8.cu
	$(NVCC) $(INCLUDES) FFT8.cu

FFT64.o : FFT64.cu
	$(NVCC) $(INCLUDES) FFT64.cu

FFT512.o : FFT512.cu
	$(NVCC) $(INCLUDES) FFT512.cu

FFT16.o : FFT16.cu
	$(NVCC) $(INCLUDES) FFT16.cu

FFT256.o : FFT256.cu
	$(NVCC) $(INCLUDES) -maxrregcount 40 FFT256.cu

FFT1024.o : FFT1024.cu
	$(NVCC) $(INCLUDES) FFT1024.cu

FFT2048.o : FFT2048.cu
	$(NVCC) $(INCLUDES) FFT2048.cu

FFT4096.o : FFT4096.cu
	$(NVCC) $(INCLUDES) FFT4096.cu

FFT8192.o : FFT8192.cu
	$(NVCC) $(INCLUDES) FFT8192.cu

clean :
	rm -f *.o FFT
